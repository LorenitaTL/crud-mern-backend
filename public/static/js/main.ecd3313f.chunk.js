(this["webpackJsonpcrud-react-node-mongodb"]=this["webpackJsonpcrud-react-node-mongodb"]||[]).push([[0],{46:function(e,t,c){},47:function(e,t,c){"use strict";c.r(t);var n=c(0),s=c.n(n),a=c(12),o=c.n(a),r=c(9),i=c(30),l=c(3),j=c(22),u=c(10),d=c.n(u),b=c(17),O=c(14),h=c.n(O),x="https://crud-mern-backend.herokuapp.com/api",p=function(e,t){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",n="".concat(x,"/").concat(e);return console.log("METHOD",c),console.log("URL",n),"GET"===c?fetch(n):fetch(n,{method:c,headers:{"Content-type":"application/json"},body:JSON.stringify(t)})},f="['Book'] bookActive",v="['Book'] bookLoaded",m="['Book'] bookClearActive",k="[ui] Open modal",N="[ui] Close modal",g=function(){return function(){var e=Object(b.a)(d.a.mark((function e(t){var c,n,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("GET BOOKS"),e.next=4,p("books");case 4:return c=e.sent,e.next=7,c.json();case 7:n=e.sent,console.log("Body",n),s=n.books,t(y(s)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log("Error",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}()},y=function(e){return{type:v,payload:e}},B=function(){return{type:m}},E=function(){return{type:k}},C=c(1),S=function(e){var t=e.book,c=Object(r.b)(),n=function(e,t){c(function(e){return{type:f,payload:e}}(e)),"edit"===t?c(E()):s(e._id)},s=function(e){h()({title:"Delete Book",text:"Are you sure to delete this item?",icon:"warning",buttons:!0}).then((function(t){var n;t&&(c((n=e,function(){var e=Object(b.a)(d.a.mark((function e(t){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("DELETE BOOK",n),e.next=4,p("books/".concat(n),{},"DELETE");case 4:return c=e.sent,e.next=7,c.json();case 7:e.sent.ok&&h()({title:"Success",text:"The book has deleted successfully",icon:"success"}).then((function(){t(g())})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}())),c(B()))}))};return Object(C.jsxs)("div",{className:"book",children:[Object(C.jsx)("div",{className:"data",children:Object(C.jsx)("p",{children:t.ISBN})}),Object(C.jsx)("div",{className:"data",children:Object(C.jsx)("p",{children:t.name})}),Object(C.jsx)("div",{className:"data",children:Object(C.jsx)("p",{children:t.author})}),Object(C.jsx)("div",{className:"data",children:Object(C.jsx)("p",{children:t.editorial})}),Object(C.jsxs)("div",{className:"data",children:[Object(C.jsxs)("button",{className:"edit",onClick:function(){n(t,"edit")},children:["Edit ",Object(C.jsx)("i",{className:"fas fa-edit"})]}),Object(C.jsxs)("button",{className:"delete",onClick:function(){n(t,"delete")},children:["Delete ",Object(C.jsx)("i",{className:"fa fa-trash","aria-hidden":"true"})]})]})]})},T=function(){var e=Object(r.b)(),t=Object(r.c)((function(e){return e.books})).books;console.log(t.length);var c=Object(n.useState)(""),s=Object(j.a)(c,2),a=s[0],o=s[1];return Object(n.useEffect)((function(){e(g())}),[e]),Object(C.jsxs)("div",{children:[Object(C.jsxs)("div",{className:"search",children:[Object(C.jsx)("input",{type:"text",placeholder:"Search",value:a,onChange:function(e){o(e.target.value)}}),Object(C.jsx)("button",{onClick:function(){e(E())},children:Object(C.jsxs)("h2",{children:[Object(C.jsx)("i",{className:"fas fa-book-open"})," New Book"]})})]}),Object(C.jsx)("div",{className:"books",children:Object(C.jsxs)("div",{className:"list",children:[Object(C.jsxs)("div",{className:"header",children:[Object(C.jsx)("big",{className:"item",children:Object(C.jsx)("h3",{children:"ISBN"})}),Object(C.jsx)("big",{className:"item",children:Object(C.jsx)("h3",{children:"NAME OF BOOK"})}),Object(C.jsx)("big",{className:"item",children:Object(C.jsx)("h3",{children:"AUTHOR"})}),Object(C.jsx)("big",{className:"item",children:Object(C.jsx)("h3",{children:"EDITORIAL"})}),Object(C.jsx)("big",{className:"item",children:Object(C.jsx)("h3",{children:"ACTIONS"})})]}),Object(C.jsx)("div",{className:"content",children:0===t.length?Object(C.jsx)("div",{children:"GETTING DATA"}):t.filter((function(e){return!a||!!(e.name.toUpperCase().includes(a.toUpperCase())||e.author.toUpperCase().includes(a.toUpperCase())||e.ISBN.toUpperCase().includes(a.toUpperCase())||e.editorial.toUpperCase().includes(a.toUpperCase()))})).map((function(e,t){return Object(C.jsx)(S,{book:e},t)}))})]})})]})},w=c(21),A=c(4),I={name:"",author:"",editorial:"",ISBN:""},U=function(){var e=Object(r.c)((function(e){return e.ui})).modalOpen,t=Object(r.c)((function(e){return e.books})).activeBook,c=Object(r.b)(),a=Object(n.useState)(I),i=Object(j.a)(a,2),l=i[0],u=i[1],O=l.name,x=l.author,f=l.editorial,v=l.ISBN,m=function(){c({type:N}),c(B())};Object(n.useEffect)((function(){u(null!==t&&void 0!==t?t:I)}),[t,u]);var k=function(e){var t=e.target;u(Object(A.a)(Object(A.a)({},l),{},Object(w.a)({},t.name,t.value)))};return e?o.a.createPortal(Object(C.jsx)(s.a.Fragment,{children:Object(C.jsx)("div",{className:"new-book",children:Object(C.jsx)("form",{onSubmit:function(e){var n;e.preventDefault(),console.log("DATA BOOK",l),c(t?(n=l,function(){var e=Object(b.a)(d.a.mark((function e(t){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("UPDATE BOOK",n),e.next=4,p("books/".concat(n._id),n,"PUT");case 4:return c=e.sent,e.next=7,c.json();case 7:e.sent.ok&&h()({title:"Success",text:"The book has updated successfully",icon:"success"}).then((function(){t(g())})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()):function(e){return function(){var t=Object(b.a)(d.a.mark((function t(c){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("NEW BOOK",e),t.next=4,p("books",e,"POST");case 4:return n=t.sent,t.next=7,n.json();case 7:t.sent.ok&&h()({title:"Success",text:"The book has saved successfully",icon:"success"}).then((function(){c(g())})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()}(l)),m()},children:Object(C.jsxs)("div",{className:"form",children:[Object(C.jsx)("h2",{children:"Add New Book"}),Object(C.jsxs)("div",{className:"input-form",children:[Object(C.jsx)("label",{children:"Name of book:"}),Object(C.jsx)("div",{children:Object(C.jsx)("input",{type:"text",name:"name",value:O,onChange:k})})]}),Object(C.jsxs)("div",{className:"input-form",children:[Object(C.jsx)("label",{children:"Author:"}),Object(C.jsx)("div",{children:Object(C.jsx)("input",{type:"text",name:"author",value:x,onChange:k})})]}),Object(C.jsxs)("div",{className:"input-form",children:[Object(C.jsx)("label",{children:"ISBN:"}),Object(C.jsx)("div",{children:Object(C.jsx)("input",{type:"text",name:"ISBN",value:v,onChange:k})})]}),Object(C.jsxs)("div",{className:"input-form",children:[Object(C.jsx)("label",{children:"Editorial:"}),Object(C.jsx)("div",{children:Object(C.jsx)("input",{type:"text",name:"editorial",value:f,onChange:k})})]}),Object(C.jsxs)("div",{className:"options",children:[Object(C.jsx)("button",{id:"cancel",onClick:m,children:Object(C.jsxs)("h3",{children:[Object(C.jsx)("i",{className:"fa fa-times","aria-hidden":"true"})," Cancel"]})}),Object(C.jsx)("button",{type:"submit",id:"save",children:Object(C.jsxs)("h3",{children:[Object(C.jsx)("i",{className:"fa fa-check","aria-hidden":"true"})," Save"]})})]})]})})})}),document.body):null},D=function(){return Object(C.jsxs)("div",{children:[Object(C.jsx)("div",{className:"header",children:Object(C.jsx)("big",{children:Object(C.jsx)("h1",{children:"Books"})})}),Object(C.jsx)(U,{}),Object(C.jsx)(T,{})]})},_=function(){return Object(C.jsx)(i.a,{children:Object(C.jsx)("div",{children:Object(C.jsx)(l.c,{children:Object(C.jsx)(l.a,{path:"/",exact:!0,component:D})})})})},K=c(11),L=c(31),G=c(32),P={books:[],activeBook:null},M={modalOpen:!1},R=Object(K.c)({books:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(A.a)(Object(A.a)({},e),{},{activeBook:t.payload});case v:return Object(A.a)(Object(A.a)({},e),{},{books:Object(G.a)(t.payload)});case m:return Object(A.a)(Object(A.a)({},e),{},{activeBook:null});default:return e}},ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return Object(A.a)(Object(A.a)({},e),{},{modalOpen:!0});case N:return Object(A.a)(Object(A.a)({},e),{},{modalOpen:!1});default:return e}}}),J="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||K.d,F=Object(K.e)(R,J(Object(K.a)(L.a))),H=function(){return Object(C.jsx)(r.a,{store:F,children:Object(C.jsx)(_,{})})};c(46);o.a.render(Object(C.jsx)(s.a.StrictMode,{children:Object(C.jsx)(H,{})}),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.ecd3313f.chunk.js.map